/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
buildscript {
  dependencies {
    classpath("org.springframework.boot:spring-boot-gradle-plugin:$springVersion")
  }
  repositories {
    jcenter()
  }
}

plugins {
  id 'java'
  id 'idea'
  id 'eclipse'
  id 'jacoco'
}

apply plugin: 'war'
apply plugin: 'org.springframework.boot'

sourceCompatibility = "$javaVersion" // -source
targetCompatibility = "$javaVersion" // -target

repositories {
  mavenCentral()
  jcenter()
}

dependencies {
  compile("org.springframework.boot:spring-boot-starter-web")
  compile("org.springframework.boot:spring-boot-starter-security")
  compile("org.thymeleaf:thymeleaf-spring4")
  compile("nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect")
  compile("org.mybatis.spring.boot:mybatis-spring-boot-starter:${mybatisSpringBootStarterVersion}")
  compile("org.projectlombok:lombok:1.16+")
  compile("net.sourceforge.nekohtml:nekohtml:1.9.15+")

  compile("com.h2database:h2")

  testCompile("org.springframework.boot:spring-boot-starter-test")
  testCompile("org.mybatis.spring.boot:mybatis-spring-boot-starter-test:${mybatisSpringBootStarterVersion}")
}
compileJava {
    options.encoding = "$defaultEncoding"
}
compileTestJava {
    options.encoding = "$defaultEncoding"
}

bootRepackage {
  mainClass = 'com.github.narh.sample.mybatis.Application'
  classifier = 'boot'
}

springBoot {
  executable = true
}

bootRun {
  jvmArgs = [ "-Dfile.encoding=$defaultEncoding" ]
}

eclipse {
  project {
    natures "org.springsource.ide.eclipse.gradle.core.nature"
  }

  classpath.file {
    whenMerged { classpath ->
      classpath.entries.findAll { entry ->
        entry.kind == "output"
      }*.path = "build/classes"
    }
  }
}
